!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;b="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,b.jmap=a()}}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.default={Account:a("./models/Account"),Attachment:a("./models/Attachment"),AuthAccess:a("./models/AuthAccess"),AuthContinuation:a("./models/AuthContinuation"),AuthMethod:a("./models/AuthMethod"),Capabilities:a("./models/Capabilities"),Client:a("./client/Client"),CreateMessageAck:a("./models/CreateMessageAck"),Constants:a("./utils/Constants"),EMailer:a("./models/EMailer"),ES6PromiseProvider:a("./promises/ES6PromiseProvider"),FilterRule:a("./models/FilterRule"),JmapError:a("./errors/JmapError"),JQueryTransport:a("./transport/JQueryTransport"),JSONBuilder:a("./utils/JSONBuilder"),Mailbox:a("./models/Mailbox"),MailboxRole:a("./models/MailboxRole"),MailCapabilities:a("./models/MailCapabilities"),Message:a("./models/Message"),MessageList:a("./models/MessageList"),Model:a("./models/Model"),OutboundMessage:a("./models/OutboundMessage"),PromiseProvider:a("./promises/PromiseProvider"),QPromiseProvider:a("./promises/QPromiseProvider"),RequestTransport:a("./transport/RequestTransport"),ServerCapabilities:a("./models/ServerCapabilities"),SetResponse:a("./models/SetResponse"),Thread:a("./models/Thread"),Transport:a("./transport/Transport"),TransportError:a("./errors/TransportError"),Utils:a("./utils/Utils"),VacationResponse:a("./models/VacationResponse")},b.exports=c.default},{"./client/Client":2,"./errors/JmapError":3,"./errors/TransportError":4,"./models/Account":5,"./models/Attachment":6,"./models/AuthAccess":7,"./models/AuthContinuation":8,"./models/AuthMethod":9,"./models/Capabilities":10,"./models/CreateMessageAck":11,"./models/EMailer":12,"./models/FilterRule":13,"./models/MailCapabilities":14,"./models/Mailbox":15,"./models/MailboxRole":16,"./models/Message":17,"./models/MessageList":18,"./models/Model":19,"./models/OutboundMessage":20,"./models/ServerCapabilities":21,"./models/SetResponse":22,"./models/Thread":23,"./models/VacationResponse":24,"./promises/ES6PromiseProvider":28,"./promises/PromiseProvider":29,"./promises/QPromiseProvider":30,"./transport/JQueryTransport":31,"./transport/RequestTransport":32,"./transport/Transport":33,"./utils/Constants":34,"./utils/JSONBuilder":35,"./utils/Utils":36}],2:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=a("./../promises/ES6PromiseProvider.js"),i=d(h),j=a("./../utils/Utils.js"),k=d(j),l=a("./../models/Account.js"),m=d(l),n=a("./../models/Mailbox.js"),o=d(n),p=a("./../models/MessageList.js"),q=d(p),r=a("./../models/SetResponse.js"),s=d(r),t=a("./../models/Thread.js"),u=d(t),v=a("./../models/Message.js"),w=d(v),x=a("./../models/OutboundMessage.js"),y=d(x),z=a("./../models/CreateMessageAck.js"),A=d(z),B=a("./../models/MailboxRole.js"),C=d(B),D=a("./../models/AuthContinuation.js"),E=d(D),F=a("./../models/AuthAccess.js"),G=d(F),H=a("../utils/Constants.js"),I=d(H),J=a("./../models/VacationResponse"),K=d(J),L=a("../errors/JmapError"),M=d(L),N=a("../models/FilterRule"),O=d(N),P=function(){function a(b,c){f(this,a),k.default.assertRequiredParameterIsPresent(b,"transport"),this.promiseProvider=c||new i.default,this.transport=b,this.transport.promiseProvider=this.promiseProvider}return g(a,[{key:"withAuthenticationUrl",value:function(a){return this.authenticationUrl=a,this}},{key:"withAuthenticationToken",value:function(a,b){return this.authToken=a,this.authScheme=b,this}},{key:"withAPIUrl",value:function(a){return this.apiUrl=a,this}},{key:"withDownloadUrl",value:function(a){return this.downloadUrl=a,this}},{key:"withAuthAccess",value:function(a){var b=this;return k.default.assertRequiredParameterIsObject(a,"access"),a instanceof G.default||(a=new G.default(this,a)),this.authAccess=a,this.authScheme="X-JMAP",this.authToken=a.accessToken,["username","signingId","signingKey","apiUrl","eventSourceUrl","uploadUrl","downloadUrl","serverCapabilities","mailCapabilities"].forEach(function(c){b[c]=a[c]}),this}},{key:"authenticate",value:function(a,b,c){var d=this;return this.transport.post(this.authenticationUrl,this._defaultNonAuthenticatedHeaders(),{username:a,deviceName:b,clientName:I.default.CLIENT_NAME,clientVersion:I.default.VERSION}).then(function(a){return d._authenticateResponse(a,c)})}},{key:"_authenticateResponse",value:function(a,b){var c=this;if(a.loginId&&void 0===a.accessToken){var d=new E.default(a);return b(d).then(function(a){if(!d.supports(a.type))throw new Error('The "'+a.type+'" authentication type is not supported by the server.');var b={loginId:d.loginId,type:a.type};return a.value&&(b.value=a.value),c.transport.post(c.authenticationUrl,c._defaultNonAuthenticatedHeaders(),b)}).then(function(a){return c._authenticateResponse(a,b)})}if(a.accessToken&&void 0===a.loginId)return new G.default(this,a);throw new Error("Unexpected response on authorization request")}},{key:"authExternal",value:function(a,b,c){return this.authenticate(a,b,function(a){return c(a).then(function(){return{type:"external"}})})}},{key:"authPassword",value:function(a,b,c){return this.authenticate(a,c,function(){return this.promiseProvider.newPromise(function(a,c){a({type:"password",value:b})})}.bind(this))}},{key:"getAccounts",value:function(a){return this.authAccess instanceof G.default?this.promiseProvider.newPromise(function(a,b){var c=[];for(var d in this.authAccess.accounts)this.authAccess.accounts.hasOwnProperty(d)&&c.push(this.authAccess.accounts[d]);a(c)}.bind(this)):this._jmapRequest("getAccounts",a)}},{key:"getMailboxes",value:function(a){return this._jmapRequest("getMailboxes",a)}},{key:"setMailboxes",value:function(a){return this._jmapRequest("setMailboxes",a)}},{key:"createMailbox",value:function(a,b){var c=this;k.default.assertRequiredParameterIsPresent(a,"name");var d=this._generateClientId();return this.setMailboxes({create:e({},d,{name:a,parentId:b})}).then(function(b){var e=b.created[d];if(!e)throw new Error("Failed to create mailbox, clientId: "+d+", message: "+(b.notCreated[d]||"none"));return new o.default(c,e.id,e.name||a,e)})}},{key:"updateMailbox",value:function(a,b){return k.default.assertRequiredParameterIsPresent(a,"id"),this.setMailboxes({update:e({},a,b)}).then(function(b){if(b.updated.indexOf(a)<0)throw new Error("Failed to update mailbox "+a+", the reason is: "+b.notUpdated[a])})}},{key:"destroyMailbox",value:function(a){return k.default.assertRequiredParameterIsPresent(a,"id"),this.destroyMailboxes([a])}},{key:"destroyMailboxes",value:function(a){return k.default.assertRequiredParameterIsArrayWithMinimumLength(a,"ids",1),this.setMailboxes({destroy:a}).then(function(a){var b=Object.keys(a.notDestroyed);if(b.length>0){var c=a.notDestroyed[b[0]],d=c.type+" ("+c.description+")";throw new Error("Failed to destroy "+b[0]+", the reason is: "+d)}})}},{key:"getMailboxWithRole",value:function(a,b){if(a instanceof C.default||(a=C.default.fromRole(a)),a===C.default.UNKNOWN)throw new Error("A valid role is required to find a mailbox by role");return this._jmapRequest("getMailboxes",b).then(function(b){for(var c=0;c<b.length;c++)if(b[c].role===a)return b[c];throw new Error("Cannot find a mailbox with role "+a.value)})}},{key:"getMessageList",value:function(a){return this._jmapRequest("getMessageList",a)}},{key:"getThreads",value:function(a){return this._jmapRequest("getThreads",a)}},{key:"getMessages",value:function(a){return this._jmapRequest("getMessages",a)}},{key:"setMessages",value:function(a){return this._jmapRequest("setMessages",a)}},{key:"updateMessage",value:function(a,b){return k.default.assertRequiredParameterIsPresent(a,"id"),k.default.assertRequiredParameterIsObject(b,"options"),this.setMessages({update:e({},a,b)}).then(function(b){if(b.updated.indexOf(a)<0)throw new Error("Failed to update message "+a+", the reason is: "+(b.notUpdated[a]||"missing"))})}},{key:"destroyMessage",value:function(a){return this.destroyMessages(a&&[a]).then(function(b){if(b.destroyed.indexOf(a)<0)throw new Error("Failed to destroy "+a+", the reason is: "+(b.notDestroyed[a]||"missing"))})}},{key:"destroyMessages",value:function(a){return k.default.assertRequiredParameterIsArrayWithMinimumLength(a,"ids",1),this.setMessages({destroy:a})}},{key:"saveAsDraft",value:function(a){return this._createMessage(a,C.default.DRAFTS)}},{key:"send",value:function(a,b){return this._createMessage(a,C.default.OUTBOX,b)}},{key:"moveMessage",value:function(a,b){return k.default.assertRequiredParameterIsPresent(a,"id"),k.default.assertRequiredParameterIsArrayWithMinimumLength(b,"mailboxIds",1),this.updateMessage(a,{mailboxIds:b})}},{key:"getVacationResponse",value:function(a){return this._jmapRequest("getVacationResponse",a).then(function(a){return a[0]})}},{key:"setVacationResponse",value:function(a,b){return k.default.assertRequiredParameterHasType(a,"vacationResponse",K.default),this._jmapRequest("setVacationResponse",{accountId:b&&b.accountId,update:e({},K.default.ID,a.toJSONObject())}).then(function(a){if(a.updated.indexOf(K.default.ID)<0)throw new Error("Failed to set vacation response. Error: "+(a.notUpdated[K.default.ID]||"none"))})}},{key:"_createMessage",value:function(a,b,c){var d=this;k.default.assertRequiredParameterHasType(a,"message",y.default);var f=this._generateClientId(),g=function(c){return a.mailboxIds=[c.id],a.isDraft=C.default.DRAFTS.value===b.value||null,d.setMessages({create:e({},f,a.toJSONObject())}).then(function(a){if(!a.created[f])throw new Error("Failed to store message with clientId "+f+". Error: "+(a.notCreated[f]||"none"));return new A.default(d,a.created[f])})};return c?g(c):this.getMailboxWithRole(b).then(g)}},{key:"_generateClientId",value:function(){return Date.now()}},{key:"setFilter",value:function(a,b){var c=a.map(function(a){return a instanceof O.default?a.toJSONObject():a});return this._jmapRequest("setFilter",e({accountId:b&&b.accountId,ifInState:b&&b.ifInState||null},O.default.ID,c)).then(function(a){if(a.updated.indexOf(O.default.ID)<0)throw new Error("Failed to set filter. Error: "+(a.notUpdated[O.default.ID]||"none"))})}},{key:"getFilter",value:function(a){return this._jmapRequest("getFilter",a).then(function(a){return a.singleton})}},{key:"_defaultNonAuthenticatedHeaders",value:function(){return{Accept:"application/json; charset=UTF-8","Content-Type":"application/json; charset=UTF-8"}}},{key:"_defaultHeaders",value:function(){return{Accept:"application/json; charset=UTF-8","Content-Type":"application/json; charset=UTF-8",Authorization:(this.authScheme?this.authScheme+" ":"")+this.authToken}}},{key:"_jmapRequest",value:function(a,b){var c=this;return this.transport.post(this.apiUrl,this._defaultHeaders(),[[a,b||{},"#0"]]).then(function(b){return k.default.assertValidJMAPResponse(a,b)}).then(function(b){return b.map(function(b){return c._handleResponse(b,a)})}).then(function(a){return a.length>1?a:a[0]})}},{key:"_handleResponse",value:function(a,b){var c=a[0],d=this["_handle"+k.default.capitalize(c)+"Response"];return d?d.bind(this)(a,b):a[1]}},{key:"_handleErrorResponse",value:function(a,b){throw new M.default(a[1],b)}},{key:"_handleListResponse",value:function(a,b,c){return k.default._jsonArrayToModelList(this,b,a[1].list,c)}},{key:"_handleSetResponse",value:function(a){return s.default.fromJSONObject(this,a[1])}},{key:"_handleAccountsResponse",value:function(a){return this._handleListResponse(a,m.default)}},{key:"_handleThreadsResponse",value:function(a){return this._handleListResponse(a,u.default)}},{key:"_handleMessagesResponse",value:function(a){return this._handleListResponse(a,w.default,function(a){try{return k.default.assertRequiredParameterIsArrayWithMinimumLength(a.mailboxIds,"mailboxIds",1)}catch(a){return!1}})}},{key:"_handleMailboxesResponse",value:function(a){return this._handleListResponse(a,o.default)}},{key:"_handleMailboxesSetResponse",value:function(a){return this._handleSetResponse(a)}},{key:"_handleMessageListResponse",value:function(a){return q.default.fromJSONObject(this,a[1])}},{key:"_handleMessagesSetResponse",value:function(a){return this._handleSetResponse(a)}},{key:"_handleVacationResponseResponse",value:function(a){return this._handleListResponse(a,K.default)}},{key:"_handleVacationResponseSetResponse",value:function(a){return this._handleSetResponse(a)}}]),a}();c.default=P,b.exports=c.default},{"../errors/JmapError":3,"../models/FilterRule":13,"../utils/Constants.js":34,"./../models/Account.js":5,"./../models/AuthAccess.js":7,"./../models/AuthContinuation.js":8,"./../models/CreateMessageAck.js":11,"./../models/Mailbox.js":15,"./../models/MailboxRole.js":16,"./../models/Message.js":17,"./../models/MessageList.js":18,"./../models/OutboundMessage.js":20,"./../models/SetResponse.js":22,"./../models/Thread.js":23,"./../models/VacationResponse":24,"./../promises/ES6PromiseProvider.js":28,"./../utils/Utils.js":36}],3:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function h(a){function b(){a.apply(this,arguments)}return b.prototype=Object.create(a.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(b,a):b.__proto__=a,b}Object.defineProperty(c,"__esModule",{value:!0});var i=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),j=a("../utils/Utils"),k=d(j),l=function(a){function b(a,c){e(this,b);var d=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return k.default.assertRequiredParameterIsPresent(a,"payload"),k.default.assertRequiredParameterIsPresent(a.type,"payload.type"),d.payload=a,d.type=a.type,d.description=a.description||null,d.method=c||null,d}return g(b,a),i(b,[{key:"toString",value:function(){return"JmapError{type="+this.type+",description="+this.description+",method="+this.method+"}"}}]),b}(h(Error));c.default=l,b.exports=c.default},{"../utils/Utils":36}],4:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function g(a){function b(){a.apply(this,arguments)}return b.prototype=Object.create(a.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(b,a):b.__proto__=a,b}Object.defineProperty(c,"__esModule",{value:!0});var h=function(a){function b(a,c,f){d(this,b);var g=e(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return g.cause=a||null,g.statusCode=c||0,g.responseText=f||null,g}return f(b,a),b}(g(Error));c.default=h,b.exports=c.default},{}],5:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=a("./Model.js"),j=d(i),k=a("../utils/Utils.js"),l=d(k),m=a("../utils/JSONBuilder.js"),n=d(m),o=function(a){function b(a,c,d){e(this,b);var g=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a));return l.default.assertRequiredParameterIsPresent(c,"id"),d=d||{},g.id=c,g.name=d.name||"",g.isPrimary=d.isPrimary||!1,g.isReadOnly=d.isReadOnly||!1,g.hasDataFor=d.hasDataFor||[],g}return g(b,a),h(b,[{key:"hasMail",value:function(){return this.hasDataFor.indexOf("mail")>=0}},{key:"hasCalendars",value:function(){return this.hasDataFor.indexOf("calendars")>=0}},{key:"hasContacts",value:function(){return this.hasDataFor.indexOf("contacts")>=0}},{key:"getMailboxes",value:function(a){return a=a||{},a.accountId=this.id,this._jmap.getMailboxes(a)}},{key:"toJSONObject",value:function(){return(new n.default).append("name",this.name).append("isPrimary",this.isPrimary).append("isReadOnly",this.isReadOnly).append("hasDataFor",this.hasDataFor).build()}}],[{key:"fromJSONObject",value:function(a,c){return l.default.assertRequiredParameterIsPresent(c,"object"),new b(a,c.id,c)}}]),b}(j.default);c.default=o,b.exports=c.default},{"../utils/JSONBuilder.js":35,"../utils/Utils.js":36,"./Model.js":19}],6:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=a("./Model.js"),j=d(i),k=a("../utils/Utils.js"),l=d(k),m=a("../utils/JSONBuilder.js"),n=d(m),o=function(a){function b(a,c,d){e(this,b);var g=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a));return l.default.assertRequiredParameterIsPresent(c,"blobId"),d=d||{},g.blobId=c,g.type=d.type||null,g.name=d.name||null,g.size=d.size||0,g.cid=d.cid||null,g.isInline=d.isInline||!1,g.width=d.width||null,g.height=d.height||null,g.url=d.url||null,!g.url&&a.downloadUrl&&(g.url=l.default.fillURITemplate(a.downloadUrl,{blobId:g.blobId,name:g.name||g.blobId})),g}return g(b,a),h(b,[{key:"getSignedDownloadUrl",value:function(){return l.default.assertRequiredParameterIsPresent(this.url,"url"),this._jmap.transport.post(this.url,this._jmap._defaultHeaders(),null,!0).then(l.default.appendQueryParameter.bind(null,this.url,"access_token"))}},{key:"toJSONObject",value:function(){return(new n.default).appendIfDefined("blobId",this.blobId).appendIfDefined("type",this.type).appendIfDefined("name",this.name).appendIfDefined("size",this.size).appendIfDefined("cid",this.cid).appendIfDefined("width",this.width).appendIfDefined("height",this.height).appendIfDefined("url",this.url).appendIfDefined("isInline",this.isInline).build()}}],[{key:"fromJSONObject",value:function(a,c){return l.default.assertRequiredParameterIsPresent(c,"object"),new b(a,c.blobId,c)}}]),b}(j.default);c.default=o,b.exports=c.default},{"../utils/JSONBuilder.js":35,"../utils/Utils.js":36,"./Model.js":19}],7:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var h=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},i=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),j=a("./Model.js"),k=d(j),l=a("../utils/Utils.js"),m=d(l),n=a("../utils/Constants.js"),o=d(n),p=a("./Account.js"),q=d(p),r=a("./ServerCapabilities.js"),s=d(r),t=a("./MailCapabilities.js"),u=d(t),v=a("../utils/JSONBuilder.js"),w=d(v),x=function(a){function b(a,c){e(this,b);var d=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a));m.default.assertRequiredParameterIsPresent(c,"payload"),["username","accessToken","signingId","signingKey","apiUrl","eventSourceUrl","uploadUrl","downloadUrl","accounts","capabilities"].forEach(function(a){m.default.assertRequiredParameterIsPresent(c[a],a)}),d.username=c.username,d.accessToken=c.accessToken,d.signingId=c.signingId,d.signingKey=c.signingKey,d.apiUrl=c.apiUrl,d.eventSourceUrl=c.eventSourceUrl,d.uploadUrl=c.uploadUrl,d.downloadUrl=c.downloadUrl,d.capabilities=c.capabilities,d.serverCapabilities=new s.default(d.capabilities[o.default.CORE_CAPABILITIES_URI]||{}),d.mailCapabilities=new u.default(d.capabilities[o.default.MAIL_CAPABILITIES_URI]||{}),d.accounts={};for(var g in c.accounts)d.accounts[g]=q.default.fromJSONObject(a,h({id:g},c.accounts[g]));return d}return g(b,a),i(b,[{key:"toJSONObject",value:function(){return(new w.default).append("username",this.username).append("accessToken",this.accessToken).append("signingId",this.signingId).append("signingKey",this.signingKey).append("apiUrl",this.apiUrl).append("eventSourceUrl",this.eventSourceUrl).append("uploadUrl",this.uploadUrl).append("downloadUrl",this.downloadUrl).appendObject("accounts",this.accounts).appendObject("capabilities",this.capabilities).build()}}]),b}(k.default);c.default=x,b.exports=c.default},{"../utils/Constants.js":34,"../utils/JSONBuilder.js":35,"../utils/Utils.js":36,"./Account.js":5,"./MailCapabilities.js":14,"./Model.js":19,"./ServerCapabilities.js":21}],8:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=a("../utils/Utils.js"),h=d(g),i=a("./AuthMethod"),j=d(i),k=function(){function a(b){e(this,a),h.default.assertRequiredParameterIsPresent(b,"payload"),h.default.assertRequiredParameterIsPresent(b.loginId,"loginId"),h.default.assertRequiredParameterIsArrayWithMinimumLength(b.methods,"methods"),this.loginId=b.loginId,this.methods=b.methods.map(function(a){return new j.default(a)}),this.prompt=b.prompt||null}return f(a,[{key:"getMethod",value:function(a){h.default.assertRequiredParameterHasType(a,"type","string");var b=null;if(this.methods.forEach(function(c){c.type===a&&(b=c)}),!b)throw new Error('No AuthMethod of type "'+a+'" found');return b}},{key:"supports",value:function(a){h.default.assertRequiredParameterHasType(a,"type","string");var b=!1;try{this.getMethod(a),b=!0}catch(a){}return b}}]),a}();c.default=k,b.exports=c.default},{"../utils/Utils.js":36,"./AuthMethod":9}],9:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var f=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},g=a("../utils/Utils.js"),h=d(g),i=function a(b){e(this,a),h.default.assertRequiredParameterIsPresent(b,"payload"),h.default.assertRequiredParameterHasType(b.type,"type","string"),f(this,b)};c.default=i,b.exports=c.default},{"../utils/Utils.js":36}],10:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var f=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},g=a("../utils/Utils.js"),h=d(g),i=function a(b,c){e(this,a),h.default.assertRequiredParameterIsPresent(b,"namespace"),c=c||{},this.ns=b,f(this,c)};c.default=i,b.exports=c.default},{"../utils/Utils.js":36}],11:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var h=a("./Model.js"),i=d(h),j=a("../utils/Utils.js"),k=d(j),l=function(a){function b(a,c){e(this,b);var d=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a));return k.default.assertRequiredParameterIsObject(c,"response"),k.default.assertRequiredParameterIsPresent(c.blobId,"response.blobId"),k.default.assertRequiredParameterHasType(c.size,"response.size","number"),d.id=c.id,d.blobId=c.blobId,d.size=c.size,d.threadId=c.threadId,d}return g(b,a),b}(i.default);c.default=l,b.exports=c.default},{"../utils/Utils.js":36,"./Model.js":19}],12:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=function(){function a(b){d(this,a),b=b||{},this.name=b.name||"",this.email=b.email||"@"}return e(a,null,[{key:"unknown",value:function(){return new a}},{key:"fromJSONObject",value:function(b,c){return new a(c)}}]),a}();c.default=f,b.exports=c.default},{}],13:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=a("./Model.js"),j=d(i),k=a("uuid/v4"),l=d(k),m=a("./filterRules/FilterRuleConditions"),n=d(m),o=a("./filterRules/FilterRuleActions"),p=d(o),q=a("../utils/Utils"),r=d(q),s=function(a){function b(a,c){e(this,b);var d=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a));return d.id=(0,l.default)(),d.name=c,d.filterCondition=null,d.filterAction=null,d}return g(b,a),h(b,[{key:"toJSONObject",value:function(){return r.default.assertRequiredParameterIsPresent(this.filterCondition,"","Filter must have a condition. Use 'when'."),r.default.assertRequiredParameterIsPresent(this.filterAction,"","Filter must have an action. Use 'then'."),this.filterCondition._validate(),this.filterAction._validate(),{id:this.id,name:this.name,condition:this.filterCondition._toJSONObject(),action:this.filterAction._toJSONObject()}}},{key:"then",get:function(){return(0,p.default)(this)}},{key:"when",get:function(){return(0,n.default)(this)}}],[{key:"fromJSONObject",value:function(a,b){throw new Error("Not implemented")}}]),b}(j.default);s.ID="singleton",s.Comparator=Object.freeze({CONTAINS:"contains",NOT_CONTAINS:"not-contains",EXACTLY_EQUALS:"exactly-equals",NOT_EXACTLY_EQUALS:"not-exactly-equals"}),c.default=s,b.exports=c.default},{"../utils/Utils":36,"./Model.js":19,"./filterRules/FilterRuleActions":26,"./filterRules/FilterRuleConditions":27,"uuid/v4":39}],14:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var h=a("./Capabilities"),i=d(h),j=a("../utils/Constants"),k=d(j),l=function(a){function b(a){
e(this,b),a=a||{};var c=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,k.default.MAIL_CAPABILITIES_URI));return c.maxMailboxesPerMessage=a.maxMailboxesPerMessage||null,c.maxSizeMessageAttachments=a.maxSizeMessageAttachments||0,c.maxDelayedSend=a.maxDelayedSend||0,c.messageListSortOptions=a.messageListSortOptions||[],c.submissionExtensions=a.submissionExtensions||{},c}return g(b,a),b}(i.default);c.default=l,b.exports=c.default},{"../utils/Constants":34,"./Capabilities":10}],15:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=a("./Model.js"),j=d(i),k=a("../utils/Utils.js"),l=d(k),m=a("./MailboxRole.js"),n=d(m),o=function(a){function b(a,c,d,g){e(this,b);var h=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a));return l.default.assertRequiredParameterIsPresent(c,"id"),l.default.assertRequiredParameterIsPresent(d,"name"),g=g||{},h.id=c,h.name=d,h.namespace=g.namespace||{},h.parentId=g.parentId||null,h.role=n.default.fromRole(g.role),h.sharedWith=g.sharedWith||{},h.sortOrder=g.sortOrder||0,h.mustBeOnlyMailbox=g.mustBeOnlyMailbox||!1,h.mayReadItems=g.mayReadItems||!1,h.mayAddItems=g.mayAddItems||!1,h.mayRemoveItems=g.mayRemoveItems||!1,h.mayCreateChild=g.mayCreateChild||!1,h.mayRename=g.mayRename||!1,h.mayDelete=g.mayDelete||!1,h.totalMessages=g.totalMessages||0,h.unreadMessages=g.unreadMessages||0,h.totalThreads=g.totalThreads||0,h.unreadThreads=g.unreadThreads||0,h.quotas=g.quotas||{},h}return g(b,a),h(b,[{key:"getMessageList",value:function(a){return a=a||{},a.filter={inMailboxes:[this.id]},this._jmap.getMessageList(a)}},{key:"update",value:function(a){return this._jmap.updateMailbox(this.id,a)}},{key:"destroy",value:function(){return this._jmap.destroyMailbox(this.id)}}],[{key:"fromJSONObject",value:function(a,c){return l.default.assertRequiredParameterIsPresent(c,"object"),new b(a,c.id,c.name,c)}}]),b}(j.default);c.default=o,b.exports=c.default},{"../utils/Utils.js":36,"./MailboxRole.js":16,"./Model.js":19}],16:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=function(){function a(b){d(this,a),this.value=b}return e(a,null,[{key:"fromRole",value:function(b){if(b)for(var c in a)if(a.hasOwnProperty(c)&&a[c].value===b)return a[c];return a.UNKNOWN}}]),a}();["inbox","archive","drafts","outbox","sent","trash","spam","templates"].forEach(function(a){f[a.toUpperCase()]=new f(a)}),f.UNKNOWN=new f(null),c.default=f,b.exports=c.default},{}],17:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=a("./Model.js"),j=d(i),k=a("./EMailer.js"),l=d(k),m=a("../utils/Utils.js"),n=d(m),o=a("./Attachment.js"),p=d(o),q=function(a){function b(a,c,d,g,h,i){e(this,b);var j=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a));return n.default.assertRequiredParameterIsPresent(c,"id"),n.default.assertRequiredParameterIsPresent(d,"blobId"),n.default.assertRequiredParameterIsPresent(g,"threadId"),n.default.assertRequiredParameterIsArrayWithMinimumLength(h,"mailboxIds",1),i=i||{},j.id=c,j.blobId=d,j.threadId=g,j.mailboxIds=h,j.inReplyToMessageId=i.inReplyToMessageId||null,j.isUnread=i.isUnread||!1,j.isFlagged=i.isFlagged||!1,j.isAnswered=i.isAnswered||!1,j.isForwarded=i.isForwarded||!1,j.isDraft=i.isDraft||!1,j.hasAttachment=i.hasAttachment||!1,j.headers=i.headers||{},j.from=n.default._jsonArrayToModelList(a,l.default,Array.isArray(i.from)?i.from:[i.from])[0],j.to=n.default._jsonArrayToModelList(a,l.default,i.to),j.cc=n.default._jsonArrayToModelList(a,l.default,i.cc),j.bcc=n.default._jsonArrayToModelList(a,l.default,i.bcc),j.replyTo=i.replyTo||[],j.subject=i.subject||null,j.date=i.date?new Date(i.date):null,j.size=i.size||0,j.preview=i.preview||null,j.textBody=i.textBody||null,j.htmlBody=i.htmlBody||null,j.attachments=n.default._jsonArrayToModelList(a,p.default,i.attachments),j}return g(b,a),h(b,[{key:"move",value:function(a){return this._jmap.moveMessage(this.id,a)}},{key:"moveToMailboxWithRole",value:function(a){var b=this;return this._jmap.getMailboxWithRole(a).then(function(a){return b.move([a.id])})}},{key:"update",value:function(a){return this._jmap.updateMessage(this.id,a)}},{key:"setIsFlagged",value:function(a){return n.default.assertRequiredParameterHasType(a,"isFlagged","boolean"),this.update({isFlagged:a})}},{key:"setIsUnread",value:function(a){return n.default.assertRequiredParameterHasType(a,"isUnread","boolean"),this.update({isUnread:a})}},{key:"setIsAnswered",value:function(a){return n.default.assertRequiredParameterHasType(a,"isAnswered","boolean"),this.update({isAnswered:a})}},{key:"destroy",value:function(){return this._jmap.destroyMessage(this.id)}}],[{key:"fromJSONObject",value:function(a,c){return n.default.assertRequiredParameterIsPresent(c,"object"),new b(a,c.id,c.blobId,c.threadId,c.mailboxIds,c)}}]),b}(j.default);c.default=q,b.exports=c.default},{"../utils/Utils.js":36,"./Attachment.js":6,"./EMailer.js":12,"./Model.js":19}],18:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=a("./Model.js"),j=d(i),k=a("../utils/Utils.js"),l=d(k),m=function(a){function b(a,c){e(this,b);var d=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a));return c=c||{},d.accountId=c.accountId||"",d.filter=c.filter||null,d.sort=c.sort||null,d.collapseThreads=c.collapseThreads||!1,d.position=c.position||0,d.total=c.total||0,d.threadIds=c.threadIds||[],d.messageIds=c.messageIds||[],d}return g(b,a),h(b,[{key:"getThreads",value:function(a){return a=a||{},a.ids=this.threadIds,this._jmap.getThreads(a)}},{key:"getMessages",value:function(a){return a=a||{},a.ids=this.messageIds,this._jmap.getMessages(a)}}],[{key:"fromJSONObject",value:function(a,c){return l.default.assertRequiredParameterIsPresent(c,"object"),new b(a,c)}}]),b}(j.default);c.default=m,b.exports=c.default},{"../utils/Utils.js":36,"./Model.js":19}],19:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function a(b){d(this,a),this._jmap=b};c.default=e,b.exports=c.default},{}],20:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=a("./Model.js"),j=d(i),k=a("../utils/Utils.js"),l=d(k),m=a("./Attachment.js"),n=d(m),o=a("../utils/JSONBuilder.js"),p=d(o),q=function(a){function b(a,c){e(this,b);var d=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a));return c=c||{},d.mailboxIds=c.mailboxIds||[],d.inReplyToMessageId=c.inReplyToMessageId||null,d.isUnread=c.isUnread,d.isFlagged=c.isFlagged,d.isAnswered=c.isAnswered,d.isDraft=c.isDraft,d.headers=c.headers||null,d.from=c.from||null,d.to=c.to||null,d.cc=c.cc||null,d.bcc=c.bcc||null,d.replyTo=c.replyTo||null,d.subject=c.subject||null,d.textBody=c.textBody||null,d.htmlBody=c.htmlBody||null,d.attachments=l.default._jsonArrayToModelList(a,n.default,c.attachments),d}return g(b,a),h(b,[{key:"toJSONObject",value:function(){return(new p.default).appendIfNotEmpty("mailboxIds",this.mailboxIds).appendIfDefined("inReplyToMessageId",this.inReplyToMessageId).appendIfDefined("isUnread",this.isUnread).appendIfDefined("isFlagged",this.isFlagged).appendIfDefined("isAnswered",this.isAnswered).appendIfDefined("isDraft",this.isDraft).appendIfDefined("headers",this.headers).appendIfDefined("from",this.from).appendIfDefined("to",this.to).appendIfDefined("cc",this.cc).appendIfDefined("bcc",this.bcc).appendIfDefined("replyTo",this.replyTo).appendIfDefined("subject",this.subject).appendIfDefined("textBody",this.textBody).appendIfDefined("htmlBody",this.htmlBody).appendIfNotEmpty("attachments",this.attachments).build()}}]),b}(j.default);c.default=q,b.exports=c.default},{"../utils/JSONBuilder.js":35,"../utils/Utils.js":36,"./Attachment.js":6,"./Model.js":19}],21:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function a(b){d(this,a),b=b||{},this.maxSizeUpload=b.maxSizeUpload||0,this.maxSizeRequest=b.maxSizeRequest||0,this.maxConcurrentUpload=b.maxConcurrentUpload||1,this.maxConcurrentRequests=b.maxConcurrentRequests||1,this.maxCallsInRequest=b.maxCallsInRequest||1,this.maxObjectsInGet=b.maxObjectsInGet||0,this.maxObjectsInSet=b.maxObjectsInSet||0};c.default=e,b.exports=c.default},{}],22:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=a("./Model.js"),j=d(i),k=a("../utils/Utils.js"),l=d(k),m=a("../errors/JmapError"),n=d(m),o=function(a){function b(a,c){e(this,b);var d=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a));return c=c||{},d.accountId=c.accountId||null,d.oldState=c.oldState||null,d.newState=c.newState||"",d.created=c.created||{},d.updated=c.updated||[],d.destroyed=c.destroyed||[],d.MDNSent=c.MDNSent||[],d.notCreated=b._mapSetErrorsToJmapErrors(c.notCreated||{}),d.notUpdated=b._mapSetErrorsToJmapErrors(c.notUpdated||{}),d.notDestroyed=b._mapSetErrorsToJmapErrors(c.notDestroyed||{}),d.MDNNotSent=b._mapSetErrorsToJmapErrors(c.MDNNotSent||{}),d}return g(b,a),h(b,null,[{key:"fromJSONObject",value:function(a,c){return l.default.assertRequiredParameterIsPresent(c,"object"),new b(a,c)}},{key:"_mapSetErrorsToJmapErrors",value:function(a){var b={};for(var c in a)a.hasOwnProperty(c)&&(b[c]=new n.default(a[c]));return b}}]),b}(j.default);c.default=o,b.exports=c.default},{"../errors/JmapError":3,"../utils/Utils.js":36,"./Model.js":19}],23:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function g(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function h(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var i=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),j=a("./Model.js"),k=d(j),l=a("../utils/Utils.js"),m=d(l),n=function(a){function b(a,c,d){f(this,b);var e=g(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a));return m.default.assertRequiredParameterIsPresent(c,"id"),d=d||{},e.id=c,e.messageIds=d.messageIds||[],e}return h(b,a),i(b,[{key:"getMessages",value:function(a){return a=a||{},a.ids=this.messageIds,this._jmap.getMessages(a)}},{key:"setIsFlagged",value:function(a){return this._flagAllMessages("isFlagged",a)}},{key:"setIsUnread",value:function(a){return this._flagAllMessages("isUnread",a)}},{key:"move",value:function(a){return this._updateAllMessages({mailboxIds:a})}},{key:"moveToMailboxWithRole",value:function(a){var b=this;return this._jmap.getMailboxWithRole(a).then(function(a){return b.move([a.id])})}},{key:"destroy",value:function(){return this._jmap.destroyMessages(this.messageIds)}},{key:"_updateAllMessages",value:function(a){var b={};return this.messageIds.forEach(function(c){b[c]=a}),this._jmap.setMessages({update:b})}},{key:"_flagAllMessages",value:function(a,b){return m.default.assertRequiredParameterHasType(b,"state","boolean"),this._updateAllMessages(e({},a,b))}}],[{key:"fromJSONObject",value:function(a,c){return m.default.assertRequiredParameterIsPresent(c,"object"),new b(a,c.id,c)}}]),b}(k.default);c.default=n,b.exports=c.default},{"../utils/Utils.js":36,"./Model.js":19}],24:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=a("./Model.js"),j=d(i),k=a("../utils/Utils.js"),l=d(k),m=a("../utils/JSONBuilder.js"),n=d(m),o=function(a){function b(a,c){e(this,b);var d=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a));return c=c||{},d.id=b.ID,d.isEnabled=c.isEnabled||!1,d.isActivated=c.isActivated||!1,d.fromDate=c.fromDate?new Date(c.fromDate):null,d.toDate=c.toDate?new Date(c.toDate):null,d.subject=c.subject||null,d.textBody=c.textBody||null,d.htmlBody=c.htmlBody||null,d}return g(b,a),h(b,[{key:"toJSONObject",value:function(){return(new n.default).append("id",this.id).append("isEnabled",this.isEnabled).appendDateIfDefined("fromDate",this.fromDate).appendDateIfDefined("toDate",this.toDate).appendIfDefined("subject",this.subject).appendIfDefined("textBody",this.textBody).appendIfDefined("htmlBody",this.htmlBody).build()}}],[{key:"fromJSONObject",value:function(a,c){return l.default.assertRequiredParameterIsPresent(c,"object"),new b(a,c)}}]),b}(j.default);o.ID="singleton",c.default=o,b.exports=c.default},{"../utils/JSONBuilder.js":35,"../utils/Utils.js":36,"./Model.js":19}],25:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=function(){function a(b){d(this,a),this.filterRule=b,this._init()}return e(a,[{key:"toJSONObject",value:function(){return this.filterRule.toJSONObject()}},{key:"_init",value:function(){throw new Error("_init not implemented in child class")}},{key:"_toJSONObject",value:function(){throw new Error("_toJSONObject not implemented in child class")}},{key:"_validate",value:function(){throw new Error("_validate not implemented in child class")}},{key:"when",get:function(){return this.filterRule.when}},{key:"then",get:function(){return this.filterRule.then}}]),a}();c.default=f,b.exports=c.default},{}],26:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function h(a){return{get moveTo(){return a.filterAction=new n(a),a.filterAction}}}Object.defineProperty(c,"__esModule",{value:!0});var i=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();c.default=h;var j=a("./AbstractConditionAction"),k=d(j),l=a("../../utils/Utils"),m=d(l),n=function(a){function b(){return e(this,b),f(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return g(b,a),i(b,[{key:"_init",value:function(){this._mailboxId=null}},{key:"mailboxId",value:function(a){return this._mailboxId=a,this}},{key:"_toJSONObject",value:function(){return{appendIn:{mailboxIds:[this._mailboxId]}}}},{key:"_validate",value:function(){m.default.assertRequiredParameterIsPresent(this._mailboxId,"","Mailbox id is not set. Use mailboxId()")}}]),b}(k.default);b.exports=c.default},{"../../utils/Utils":36,"./AbstractConditionAction":25}],27:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function h(a){return{get from(){return a.filterCondition=new r(a),a.filterCondition},get to(){return a.filterCondition=new s(a),a.filterCondition},get cc(){return a.filterCondition=new t(a),a.filterCondition},get recipient(){return a.filterCondition=new u(a),a.filterCondition},get subject(){return a.filterCondition=new v(a),a.filterCondition}}}Object.defineProperty(c,"__esModule",{value:!0});var i=function a(b,c,d){null===b&&(b=Function.prototype);var e=Object.getOwnPropertyDescriptor(b,c);if(void 0===e){var f=Object.getPrototypeOf(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;if(void 0!==g)return g.call(d)},j=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();c.default=h;var k=a("./AbstractConditionAction"),l=d(k),m=a("../FilterRule"),n=d(m),o=a("../../utils/Utils"),p=d(o),q=function(a){function b(){return e(this,b),f(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return g(b,a),j(b,[{key:"_init",value:function(a){this._field=a,this._comparator=null,this._value=null}},{key:"value",value:function(a){return this._value=a,this}},{key:"comparator",value:function(a){if(!p.default.objectValuesIncludes(n.default.Comparator,a))throw new Error("From#comparator(): "+a+" must be one of "+p.default.objectValues(n.default.Comparator));return this._comparator=a,this}},{key:"_toJSONObject",value:function(){return{field:this._field,comparator:this._comparator,value:this._value}}},{key:"_validate",value:function(){p.default.assertRequiredParameterIsPresent(this._comparator,"","Comprator is not set. Use comparator()"),p.default.assertRequiredParameterIsPresent(this._value,"","Value is not set. Use value()")}}]),b}(l.default),r=function(a){function b(){return e(this,b),f(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return g(b,a),j(b,[{key:"_init",value:function(){i(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"_init",this).call(this,"from")}}]),b}(q),s=function(a){function b(){return e(this,b),f(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return g(b,a),j(b,[{key:"_init",value:function(){i(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"_init",this).call(this,"to")}}]),b}(q),t=function(a){function b(){return e(this,b),f(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return g(b,a),j(b,[{key:"_init",value:function(){i(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"_init",this).call(this,"cc")}}]),b}(q),u=function(a){function b(){return e(this,b),f(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return g(b,a),j(b,[{key:"_init",value:function(){i(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"_init",this).call(this,"recipient")}}]),b}(q),v=function(a){function b(){return e(this,b),f(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return g(b,a),j(b,[{key:"_init",value:function(){i(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"_init",this).call(this,"subject")}}]),b}(q);b.exports=c.default},{"../../utils/Utils":36,"../FilterRule":13,"./AbstractConditionAction":25}],28:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=a("./PromiseProvider.js"),j=d(i),k=function(a){function b(){return e(this,b),f(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return g(b,a),h(b,[{key:"newPromise",value:function(a){return new Promise(a)}}]),b}(j.default);c.default=k,b.exports=c.default},{"./PromiseProvider.js":29}],29:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=function(){function a(){d(this,a)}return e(a,[{key:"newPromise",value:function(a){throw new Error("PromiseProvider is an abstract class. Please use a concrete implementation.")}}]),a}();c.default=f,b.exports=c.default},{}],30:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=a("./PromiseProvider.js"),j=d(i),k=function(b){function c(){return e(this,c),f(this,(c.__proto__||Object.getPrototypeOf(c)).apply(this,arguments))}return g(c,b),h(c,[{key:"newPromise",value:function(b){return a("q").Promise(b)}}]),c}(j.default);c.default=k,b.exports=c.default},{"./PromiseProvider.js":29,q:"q"}],31:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=a("./Transport.js"),j=d(i),k=a("../errors/TransportError"),l=d(k),m=function(a){function b(a){e(this,b);var c=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return c.promiseProvider=a,c}return g(b,a),h(b,[{key:"post",value:function(a,b,c,d){return this.promiseProvider.newPromise(function(e,f){jQuery.ajax({url:a,method:"POST",headers:b,data:d?c:JSON.stringify(c),dataType:d?void 0:"json",processData:!1,jsonp:!1}).done(e).fail(function(a,b,c){return f(new l.default(c,a.status,a.responseText))})})}}]),b}(j.default);c.default=m,b.exports=c.default},{"../errors/TransportError":4,"./Transport.js":33}],32:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=a("./Transport"),j=d(i),k=a("../errors/TransportError"),l=d(k),m=a("../utils/Constants"),n=function(b){function c(a){e(this,c);var b=f(this,(c.__proto__||Object.getPrototypeOf(c)).call(this));return b.promiseProvider=a,b}return g(c,b),h(c,[{key:"post",value:function(b,c,d,e){return this.promiseProvider.newPromise(function(f,g){a("request")({url:b,headers:c,method:"POST",body:d,json:!e},function(a,b,c){return a||m.SUCCESS_RESPONSE_CODES.indexOf(b.statusCode)<0?g(new l.default(a,b&&b.statusCode,c)):void f(c)})})}}]),c}(j.default);c.default=n,b.exports=c.default},{"../errors/TransportError":4,"../utils/Constants":34,"./Transport":33,request:"request"}],33:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d);
}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=function(){function a(){d(this,a)}return e(a,[{key:"post",value:function(a,b,c,d){throw new Error("Transport is an abstract class. Please use a concrete implementation.")}}]),a}();c.default=f,b.exports=c.default},{}],34:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.default={VERSION:"0.0.28-dev",CLIENT_NAME:"jmap-client (https://github.com/linagora/jmap-client)",SUCCESS_RESPONSE_CODES:[200,201],ERROR:"error",CORE_CAPABILITIES_URI:"http://jmap.io/spec-core.html",MAIL_CAPABILITIES_URI:"http://jmap.io/spec-mail.html"},b.exports=c.default},{}],35:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=a("../utils/Utils.js"),i=d(h),j=function(){function a(){e(this,a),this.result={}}return g(a,[{key:"append",value:function(a,b){return i.default.assertRequiredParameterIsPresent(a,"name"),i.default.assertRequiredParameterIsPresent(b,"value"),this.result[a]=b,this}},{key:"appendIfDefined",value:function(a,b){return i.default.isDefined(b)&&this.append(a,b),this}},{key:"appendDateIfDefined",value:function(a,b){return i.default.isDefined(b)&&(i.default.assertRequiredParameterHasType(b,"date",Date),this.append(a,b.toISOString().replace(/.\d+Z/,"Z"))),this}},{key:"appendIfNotEmpty",value:function(a,b){return b&&(i.default.assertRequiredParameterIsArrayWithMinimumLength(b,a),b.length>0&&this.append(a,b.map(function(a){return a.toJSONObject?a.toJSONObject():a}))),this}},{key:"appendObject",value:function(a,b){var c=void 0,d={};i.default.assertRequiredParameterIsObject(b,"value");for(c in b)b.hasOwnProperty(c)&&("object"===f(b[c])&&b[c].toJSONObject?d[c]=b[c].toJSONObject():d[c]=b[c]);return this.append(a,d),this}},{key:"build",value:function(){return this.result}}]),a}();c.default=j,b.exports=c.default},{"../utils/Utils.js":36}],36:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=a("./Constants"),h=function(){function a(){throw d(this,a),new Error("The Utils class cannot be instantiated.")}return f(a,null,[{key:"isDefined",value:function(a){return"undefined"!=typeof a&&null!==a}},{key:"assertRequiredParameterIsPresent",value:function(b,c){var d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(d=d||"The "+c+" parameter is required",!a.isDefined(b))throw new Error(d);return b}},{key:"assertRequiredParameterIsObject",value:function(b,c){if(a.assertRequiredParameterIsPresent(b,c),"object"!==("undefined"==typeof b?"undefined":e(b))||Array.isArray(b))throw new Error('The "'+c+'" parameter is not an object.');return b}},{key:"assertRequiredParameterHasType",value:function(b,c,d){if(a.assertRequiredParameterIsPresent(b,c),"string"==typeof d){if(("undefined"==typeof b?"undefined":e(b))!==d)throw new Error('The "'+c+'" parameter has not the expected type: '+d)}else if(!(b instanceof d))throw new Error('The "'+c+'" parameter has not the expected type: '+d);return b}},{key:"assertRequiredParameterIsArrayWithMinimumLength",value:function(a,b,c){if(!Array.isArray(a))throw new Error('The "'+b+'" parameter must be an Array.');if(c&&a.length<c)throw new Error('The "'+b+'" parameter must have at least '+c+" element(s).");return a}},{key:"assertValidJMAPResponse",value:function(b,c){function d(a){return 0===a.filter(function(a){return!Array.isArray(a)}).length}if(!c||!Array.isArray(c))throw new Error('Expected an array as the JMAP response for a "'+b+'" request.');if(0===c.length||!d(c))throw new Error('Expected an array of exactly 1 array element as the JMAP response for a "'+b+'" request.');var e=c[0][0],f=a._expectedResponseFor(b);if(e!==g.ERROR&&f&&e!==f)throw new Error('Expected "'+f+'" as the JMAP response for a "'+b+'" request, but got "'+e+'".');if(!c[0][1])throw new Error('The JMAP response for a "'+b+'" request should return some data.');return c}},{key:"capitalize",value:function(a){return a&&"string"==typeof a?a.charAt(0).toUpperCase()+a.substring(1):a}},{key:"fillURITemplate",value:function(b,c){return a.assertRequiredParameterIsPresent(b,"uri"),c?b.replace(/{(.+?)}/g,function(a,b){var d=c[b];return d?encodeURIComponent(d):a}):b}},{key:"appendQueryParameter",value:function(a,b,c){return a&&b&&c?a+(a.indexOf("?")>-1?"&":"?")+encodeURIComponent(b)+"="+encodeURIComponent(c):a}},{key:"nthElementOrDefault",value:function(a,b,c){return Array.isArray(a)&&b>=0&&a.length>b?a[b]:c}},{key:"objectValues",value:function(a){return Object.keys(a).map(function(b){return a[b]})}},{key:"objectValuesIncludes",value:function(b,c){return a.objectValues(b).indexOf(c)>=0}},{key:"_jsonArrayToModelList",value:function(a,b,c,d){return Array.isArray(c)?(d&&(c=c.filter(d)),c.map(b.fromJSONObject.bind(null,a))):[]}},{key:"_nullOrNewInstance",value:function(a,b){return a&&new b(a)||null}},{key:"_expectedResponseFor",value:function(a){return{getAccounts:"accounts",getMailboxes:"mailboxes",getMessageList:"messageList",getThreads:"threads",getMessages:"messages",setMessages:"messagesSet",setMailboxes:"mailboxesSet",getVacationResponse:"vacationResponse",setVacationResponse:"vacationResponseSet",getFilter:"filter",setFilter:"filterSet"}[a]}}]),a}();c.default=h,b.exports=c.default},{"./Constants":34}],37:[function(a,b,c){function d(a,b){var c=b||0,d=e;return[d[a[c++]],d[a[c++]],d[a[c++]],d[a[c++]],"-",d[a[c++]],d[a[c++]],"-",d[a[c++]],d[a[c++]],"-",d[a[c++]],d[a[c++]],"-",d[a[c++]],d[a[c++]],d[a[c++]],d[a[c++]],d[a[c++]],d[a[c++]]].join("")}for(var e=[],f=0;f<256;++f)e[f]=(f+256).toString(16).substr(1);b.exports=d},{}],38:[function(a,b,c){var d="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(d){var e=new Uint8Array(16);b.exports=function(){return d(e),e}}else{var f=new Array(16);b.exports=function(){for(var a,b=0;b<16;b++)0===(3&b)&&(a=4294967296*Math.random()),f[b]=a>>>((3&b)<<3)&255;return f}}},{}],39:[function(a,b,c){function d(a,b,c){var d=b&&c||0;"string"==typeof a&&(b="binary"===a?new Array(16):null,a=null),a=a||{};var g=a.random||(a.rng||e)();if(g[6]=15&g[6]|64,g[8]=63&g[8]|128,b)for(var h=0;h<16;++h)b[d+h]=g[h];return b||f(g)}var e=a("./lib/rng"),f=a("./lib/bytesToUuid");b.exports=d},{"./lib/bytesToUuid":37,"./lib/rng":38}]},{},[1])(1)});